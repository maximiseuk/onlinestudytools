(this.webpackJsonpmaximiseonlinestudytools=this.webpackJsonpmaximiseonlinestudytools||[]).push([[18],{277:function(e,t,a){"use strict";a.r(t);var n=a(34),l=a(160),r=a(22),o=a(5),c=a(0),i=a.n(c),s=a(83),u=a(154),m=a(147),d=a(110),p=a(188),b=a(211),E=a(212),f=a(145),g=a(213),y=a(155),C=a(292),O=a(190),h=a.n(O),j=a(192),w=a.n(j),v=a(250),N=a.n(v),k=a(191),x=a.n(k),S=a(148),D=a(175),R=a.n(D),T=a(293),B=a(167),G=a.n(B),W=a(166),J=a.n(W),I=a(149),_=a(215),F=a(219),z=a(217),A=a(218),L=a(216),P=a(26),M=a(17),Y=Object(m.a)((function(e){var t;return{loadingContainer:{textAlign:"center",margin:"0 auto"},newGoal:{marginTop:16},iconBtn:{marginBottom:8},swiper:{borderRadius:"8px 8px 0 0"},card:(t={},Object(o.a)(t,e.breakpoints.down(600),{borderRadius:0}),Object(o.a)(t,e.breakpoints.up(600),{height:"100%"}),Object(o.a)(t,"height","100%"),t)}}));t.default=function(){var e=Object(P.b)(),t=Y(),a=Object(c.useState)(null),m=Object(r.a)(a,2),O=m[0],j=m[1],v=Object(c.useState)(null),k=Object(r.a)(v,2),D=k[0],B=k[1],W=Object(c.useState)({Current:0,Completed:0}),q=Object(r.a)(W,2),H=q[0],K=q[1],Q=Object(c.useState)({desc:"",newTitle:"",newDesc:""}),U=Object(r.a)(Q,2),V=U[0],X=U[1],Z=Object(c.useState)({i:0,type:"Current"}),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ae=Object(c.useState)({delete:!1,edit:!1,newGoal:!1}),ne=Object(r.a)(ae,2),le=ne[0],re=ne[1],oe=Object(I.a)("(min-width: 600px)"),ce=oe?g.a:R.a,ie=function(e){return function(){re(Object(l.a)({},le,Object(o.a)({},e,!1)))}},se=function(e,t,a){return function(){te({i:t,type:a}),"edit"===e&&X(Object(l.a)({},V,{desc:O[a][t].desc})),re(Object(l.a)({},le,Object(o.a)({},e,!0)))}},ue=function(e){return function(t){X(Object(l.a)({},V,Object(o.a)({},e,t.target.value)))}},me=function(e){return function(){var t=O.Current[e];t.completed=!0,B({Current:O.Current.filter((function(t,a){return a!==e})),Completed:[t].concat(Object(n.a)(O.Completed))})}},de=function(e){return function(){var t=O.Completed[e];t.completed=!1,B({Completed:O.Completed.filter((function(t,a){return a!==e})),Current:[t].concat(Object(n.a)(O.Current))})}};return Object(c.useEffect)((function(){fetch("https://maximise.herokuapp.com/users/get_data/goals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionID:Object(M.a)("sessionID"),username:Object(M.a)("email")})}).then((function(e){return e.json()})).then((function(t){"{}"!==JSON.stringify(t.errors)?e({type:"NEW_ERROR",payload:"There was an error loading your goals"}):(j(t.response?t.response:{Completed:[],Current:[]}),B(t.response?t.response:{Completed:[],Current:[]}))})).catch((function(){e({type:"NEW_ERROR",payload:"There was an error loading your goals"})}))}),[]),Object(c.useEffect)((function(){D&&JSON.stringify(D)!==JSON.stringify(O)&&(j(D),fetch("https://maximise.herokuapp.com/users/update_data/goals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newData:D,sessionID:Object(M.a)("sessionID"),username:Object(M.a)("email")})}).then((function(e){return e.json()})).then((function(t){"{}"!==JSON.stringify(t.errors)?e({type:"NEW_ERROR",payload:"There was an error updating your goals"}):j(D)})).catch((function(){e({type:"NEW_ERROR",payload:"There was an error updating your goals"})})))}),[D]),O?i.a.createElement(s.a,{className:"fade padding"},Object.keys(O).sort().reverse().map((function(e){return i.a.createElement(c.Fragment,{key:e},i.a.createElement(d.a,{variant:"h4",gutterBottom:!0},i.a.createElement("span",{className:"highlight"},e+" "),"Goals"),i.a.createElement(ce,function(e){return oe?{container:!0,spacing:2,className:t.container}:{index:H[e],onChangeIndex:function(t){K(Object(l.a)({},H,Object(o.a)({},e,t)))},enableMouseEvents:!0,className:t.swiper}}(e),O[e].map((function(a,n){return i.a.createElement(g.a,{item:!0,xs:12,sm:6,md:4,lg:3,key:n},i.a.createElement(b.a,{className:t.card},i.a.createElement(E.a,null,i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement(d.a,{variant:"h5",gutterBottom:!0,style:{overflow:"hidden",textTruncate:"ellipsis"}},a.subject),i.a.createElement("div",{style:{marginLeft:"auto",display:"flex"}},i.a.createElement(S.a,{placement:"bottom",title:"Delete"},i.a.createElement(y.a,{color:"primary",className:t.iconBtn,onClick:se("delete",n,e)},i.a.createElement(h.a,null))),"Current"===e&&i.a.createElement(S.a,{placement:"bottom",title:"Edit"},i.a.createElement(y.a,{color:"primary",className:t.iconBtn,onClick:se("edit",n,e)},i.a.createElement(x.a,null))),i.a.createElement(S.a,{placement:"bottom",title:"Current"===e?"Done":"Redo"},i.a.createElement(y.a,{color:"primary",className:t.iconBtn,onClick:"Current"===e?me(n):de(n)},"Current"===e?i.a.createElement(w.a,null):i.a.createElement(N.a,null))))),i.a.createElement(d.a,null,a.desc))))}))),O[e].length>0?!oe&&i.a.createElement(T.a,{variant:"dots",style:{marginBottom:"Wellbeing"===e?16:0,borderRadius:"0 0 8px 8px"},steps:O[e].length,position:"static",activeStep:H[e],nextButton:i.a.createElement(y.a,{size:"small",onClick:function(){return K(Object(l.a)({},H,Object(o.a)({},e,H[e]+1)))},disabled:H[e]===O[e].length-1},i.a.createElement(J.a,null)),backButton:i.a.createElement(y.a,{size:"small",onClick:function(){return K(Object(l.a)({},H,Object(o.a)({},e,H[e]-1)))},disabled:0===H[e]},i.a.createElement(G.a,null))}):i.a.createElement(d.a,null,"You don't have any ",e.toLowerCase()," goals yet"),"Current"===e&&i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{variant:"contained",className:t.newGoal,onClick:se("newGoal",0,"Current")},"New Goal"),i.a.createElement(p.a,{style:{margin:"16px 0"}})))})),i.a.createElement(_.a,{open:le.delete,onClose:ie("delete"),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(L.a,{id:"alert-dialog-title"},"Confirm action"),i.a.createElement(z.a,null,i.a.createElement(A.a,{id:"alert-dialog-description"},"Are you sure you want to delete this goal?")),i.a.createElement(F.a,null,i.a.createElement(f.a,{onClick:ie("delete"),color:"primary",variant:"outlined"},"Cancel"),i.a.createElement(f.a,{onClick:function(){B(Object(l.a)({},O,Object(o.a)({},ee.type,O[ee.type].filter((function(e,t){return t!==ee.i}))))),re(Object(l.a)({},le,{delete:!1}))},color:"primary",autoFocus:!0},"Delete"))),i.a.createElement(_.a,{open:le.edit,onClose:ie("edit"),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0},i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),B(Object(l.a)({},O,{Current:O.Current.map((function(e,t){return t===ee.i?Object(l.a)({},e,{desc:V.desc}):e}))})),ie("edit")()}},i.a.createElement(L.a,{id:"alert-dialog-title"},"Change goal description"),i.a.createElement(z.a,null,i.a.createElement(C.a,{onChange:ue("desc"),value:V.desc,variant:"filled",label:"Enter the new goal description",autoFocus:!0,fullWidth:!0})),i.a.createElement(F.a,null,i.a.createElement(f.a,{onClick:ie("edit"),color:"primary"},"Cancel"),i.a.createElement(f.a,{type:"submit",color:"primary",disabled:""===V.desc},"Change")))),i.a.createElement(_.a,{open:le.newGoal,onClose:ie("newGoal"),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0},i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),B({Completed:O.Completed,Current:[{subject:V.newTitle,desc:V.newDesc,completed:!1}].concat(Object(n.a)(O.Current))}),ie("newGoal")(),X({desc:"",newTitle:"",newDesc:""})}},i.a.createElement(L.a,{id:"alert-dialog-title"},"Create a new goal"),i.a.createElement(z.a,null,i.a.createElement(C.a,{onChange:ue("newTitle"),value:V.newTitle,variant:"filled",label:"Enter the new goal's title",autoFocus:!0,fullWidth:!0,style:{marginBottom:16}}),i.a.createElement(C.a,{onChange:ue("newDesc"),value:V.newDesc,variant:"filled",label:"Enter the new goal's description",fullWidth:!0})),i.a.createElement(F.a,null,i.a.createElement(f.a,{onClick:ie("newGoal"),color:"primary"},"Cancel"),i.a.createElement(f.a,{type:"submit",color:"primary",disabled:""===V.newTitle||""===V.newDesc},"Create"))))):i.a.createElement("div",{className:t.loadingContainer},i.a.createElement(u.a,null))}}}]);
//# sourceMappingURL=18.8bc85fb5.chunk.js.map