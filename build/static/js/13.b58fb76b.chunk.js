(this.webpackJsonpmaximiseonlinestudytools=this.webpackJsonpmaximiseonlinestudytools||[]).push([[13],{188:function(e,a,t){"use strict";var r=t(1),n=t(2),o=t(0),s=t.n(o),i=(t(4),t(3)),c=t(6),l=t(11),u=s.a.forwardRef((function(e,a){var t=e.absolute,o=void 0!==t&&t,c=e.classes,l=e.className,u=e.component,d=void 0===u?"hr":u,m=e.light,h=void 0!==m&&m,p=e.orientation,g=void 0===p?"horizontal":p,f=e.role,b=void 0===f?"hr"!==d?"separator":void 0:f,w=e.variant,O=void 0===w?"fullWidth":w,E=Object(n.a)(e,["absolute","classes","className","component","light","orientation","role","variant"]);return s.a.createElement(d,Object(r.a)({className:Object(i.a)(c.root,l,"fullWidth"!==O&&c[O],o&&c.absolute,h&&c.light,{vertical:c.vertical}[g]),role:b,ref:a},E))}));a.a=Object(c.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(l.c)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1}}}),{name:"MuiDivider"})(u)},210:function(e,a,t){"use strict";var r=t(1),n=t(2),o=t(0),s=t.n(o),i=(t(4),t(3)),c=t(83),l=t(6),u=s.a.forwardRef((function(e,a){var t=e.classes,o=e.className,l=e.raised,u=void 0!==l&&l,d=Object(n.a)(e,["classes","className","raised"]);return s.a.createElement(c.a,Object(r.a)({className:Object(i.a)(t.root,o),elevation:u?8:1,ref:a},d))}));a.a=Object(l.a)({root:{overflow:"hidden"}},{name:"MuiCard"})(u)},211:function(e,a,t){"use strict";var r=t(1),n=t(2),o=t(0),s=t.n(o),i=(t(4),t(3)),c=t(6),l=s.a.forwardRef((function(e,a){var t=e.classes,o=e.className,c=e.component,l=void 0===c?"div":c,u=Object(n.a)(e,["classes","className","component"]);return s.a.createElement(l,Object(r.a)({className:Object(i.a)(t.root,o),ref:a},u))}));a.a=Object(c.a)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(l)},290:function(e,a,t){"use strict";t.r(a);var r=t(5),n=t(160),o=t(22),s=t(0),i=t.n(s),c=t(83),l=t(188),u=t(210),d=t(211),m=t(288),h=t(110),p=t(1),g=t(2),f=(t(4),t(3)),b=t(6),w=i.a.forwardRef((function(e,a){var t=e.classes,r=e.className,n=e.row,o=void 0!==n&&n,s=Object(g.a)(e,["classes","className","row"]);return i.a.createElement("div",Object(p.a)({className:Object(f.a)(t.root,r,o&&t.row),ref:a},s))})),O=Object(b.a)({root:{display:"flex",flexDirection:"column",flexWrap:"wrap"},row:{flexDirection:"row"}},{name:"MuiFormGroup"})(w),E=t(244),y=t(272),v=t(147),j=t(212),P=t(185),N=t(26),T=t(31),C=t(145),S=t(17),R=t(283),k=t(292),x=Object(v.a)((function(e){return{card:{marginBottom:16}}}));a.default=function(){var e=x(),a=Object(N.b)(),t=Object(T.g)(),p=Object(N.c)((function(e){return e.lightTheme})),g=Object(N.c)((function(e){return e.subjects})),f=Object(s.useState)(p),b=Object(o.a)(f,2),w=b[0],v=b[1],D={newPassword:"",repeatPassword:""},_=Object(s.useState)(D),J=Object(o.a)(_,2),G=J[0],W=J[1],B=Object(s.useState)(D),I=Object(o.a)(B,2),M=I[0],U=I[1],L=function(e){return function(a){W(Object(n.a)({},G,Object(r.a)({},e,a.target.value)));var t={};"repeatPassword"===e&&(t=0===a.target.value.length?{repeatPassword:""}:a.target.value!==G.newPassword?{repeatPassword:"Passwords must match"}:{repeatPassword:""}),"newPassword"===e&&(t=a.target.value.length<6?{newPassword:"Password must at least 6 characters"}:{newPassword:""},t=a.target.value!==G.newPassword?Object(n.a)({},t,{repeatPassword:"Passwords must match"}):Object(n.a)({},t,{repeatPassword:""})),"oldPassword"===e&&(t=0===a.target.value.length?{oldPassword:"Please enter this field"}:{oldPassword:""}),U(Object(n.a)({},M,{},t))}};return Object(s.useEffect)((function(){a({type:"TOGGLE_THEME_TYPE",payload:w});var e=new Date;document.cookie="theme=".concat(w?"light":"","; expires ").concat(e.getTime()+4e12,"; path=/")}),[w]),i.a.createElement(c.a,{className:"fade padding"},i.a.createElement(u.a,{className:e.card},i.a.createElement(d.a,null,i.a.createElement(h.a,{variant:"h4",gutterBottom:!0},"Toggle ",i.a.createElement("span",{className:"highlight"},"light")," theme"),i.a.createElement(O,{row:!0},i.a.createElement(E.a,{control:i.a.createElement(y.a,{checked:w,onChange:function(e){return v(e.target.checked)},value:"lightTheme",color:"primary"}),label:"Light Theme"})))),i.a.createElement(u.a,{className:e.card},i.a.createElement(d.a,null,i.a.createElement(h.a,{variant:"h4",gutterBottom:!0},"Change ",i.a.createElement("span",{className:"highlight"},"password")),i.a.createElement("form",{onSubmit:function(e){e.preventDefault();""===M.repeatPassword&&""===M.password&&""===M.oldPassword&&(G.oldPassword,G.newPassword);fetch("https://maximise.herokuapp.com/users/change_password",{method:"POST",body:JSON.stringify({newPassword:G.newPassword,sessionID:Object(S.a)("sessionID"),username:Object(S.a)("email")}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(console.log(e),"{}"!==JSON.stringify(e.errors)){a({type:"NEW_ERROR",payload:"There was an error updating your password"});var t=M;for(var r in e.errors)t[r]=e.errors[r];U(t)}else W(D),U(D)})).catch((function(){a({type:"NEW_ERROR",payload:"There was an error updating your settings"})}))}},i.a.createElement(j.a,{container:!0,spacing:2},Object.keys(D).map((function(e){return i.a.createElement(j.a,{item:!0,xs:12,sm:6,key:e},i.a.createElement(m.a,{label:Object(P.startCase)(e),value:G[e],onChange:L(e),variant:"filled",helperText:M[e]+" ",fullWidth:!0,error:""!==M[e],type:"password",autoComplete:"false"}))}))),i.a.createElement(C.a,{variant:"contained",type:"submit"},"Change")))),g&&i.a.createElement(u.a,{className:e.card},i.a.createElement(d.a,null,i.a.createElement(h.a,{variant:"h4",gutterBottom:!0},"Edit your ",i.a.createElement("span",{className:"highlight"},"subjects")),i.a.createElement(R.a,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:function(e,t){return function(e){console.log(e),fetch("https://maximise.herokuapp.com/users/update_data/subjects",{method:"POST",body:JSON.stringify({sessionID:Object(S.a)("sessionID"),username:Object(S.a)("email"),newData:e})}).then((function(e){return e.json()})).then((function(t){console.log(t.errors),"{}"!==JSON.stringify(t.errors)?(console.log(t),a({type:"NEW_ERROR",payload:"There was an error updating your subjects"})):a({type:"CHANGE_SUBJECTS",payload:e})})).catch((function(e){console.error(e),a({type:"NEW_ERROR",payload:"There was an error updating your subjects"})})),a({type:"CHANGE_SUBJECTS",payload:e})}(t)},options:["Maths","Chemistry","Physics","Biology","Computing","Astronomy","Greek","Latin","English literature","English language","Art","Technology","French","Further maths","German","Spanish","Business","Mandarin","Drama","Economics","Food tech","Politics","History","Geography","Italian","Religious studies","Music","Psychology","Statistics","Sociology","Citizenship","Urdu","Underwater basket weaving"],defaultValue:g,renderTags:function(e,a){return e.map((function(e,t){return i.a.createElement(k.a,Object.assign({key:t,variant:"outlined",label:e},a({index:t}),{style:{margin:4}}))}))},renderInput:function(e){return i.a.createElement(m.a,Object.assign({},e,{label:"Enter your subjects",margin:"normal",variant:"filled",fullWidth:!0}))}}),i.a.createElement(C.a,{variant:"contained"},"Update"))),i.a.createElement(l.a,{style:{margin:"16px 0"}}),i.a.createElement(C.a,{variant:"contained",onClick:function(){fetch("https://maximise.herokuapp.com/users/logout",{method:"POST",body:JSON.stringify({sessionID:Object(S.a)("sessionID"),username:Object(S.a)("email")})}).then((function(e){return e.text()})).then((function(e){document.cookie="email=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="theme=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="sessionID=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",a({type:"TOGGLE_THEME_TYPE",payload:!1}),t.replace("/")})).catch((function(){a({type:"NEW_ERROR",payload:"There was an error logging you out"})}))}},"Logout"))}}}]);
//# sourceMappingURL=13.b58fb76b.chunk.js.map